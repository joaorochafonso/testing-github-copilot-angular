## Welcome to this tutorial on how to make use of GitHub Copilot to write unit tests in Angular!<p>

<br>
This README will also provide some necessarily basic information to help you test the code we'll be writing with Copilot's help.<p>
In fact, this tutorial does not assume you have some basic knowledge of Angular and unit testing.
<br>

### Introduction to Angular

This Angular basic project was bootstrapped with [Angular CLI](https://angular.io/cli#basic-workflow), which comes with a few commands to help us create new components, services, etc.<p>
Angular also uses [Jasmine](https://jasmine.github.io/) for unit testing and [Karma](https://karma-runner.github.io/latest/index.html) as a test runner.<p>
Actually, Copilot not only suggested the commands to create the components, services, as well as the code for the tests, it also helped me write this accurate and brief description.
<br>

Shall we get started?

### Introduction to Angular Specs and Test Suites

Observing the project's folder structure, we notice one file with the extension **.spec.ts** inside **/src/app**: **app.component.spec.ts**).
This is the default extension for spec (specification) files in Angular and they exist for components, services, modules, directives, pipes, etc.<p>
**app.component.spec.ts** is the spec file responsible for unit testing the **app.component.ts** file.<p>
So, specs are the files that contain tests, generally, a group of unit tests that we call a test suite. That is, the files containing the code that will test the code we write.<p>
<br>
**app.component.spec.ts** code:

```typescript
import { TestBed } from "@angular/core/testing";
import { RouterTestingModule } from "@angular/router/testing";
import { AppComponent } from "./app.component";

describe("AppComponent", () => {
  beforeEach(() =>
    TestBed.configureTestingModule({
      imports: [RouterTestingModule],
      declarations: [AppComponent],
    })
  );

  it("should create the app", () => {
    const fixture = TestBed.createComponent(AppComponent);
    const app = fixture.componentInstance;
    expect(app).toBeTruthy();
  });

  it(`should have as title 'angular-testing'`, () => {
    const fixture = TestBed.createComponent(AppComponent);
    const app = fixture.componentInstance;
    expect(app.title).toEqual("angular-testing");
  });

  it("should render title", () => {
    const fixture = TestBed.createComponent(AppComponent);
    fixture.detectChanges();
    const compiled = fixture.nativeElement as HTMLElement;
    expect(compiled.querySelector(".content span")?.textContent).toContain("angular-testing app is running!");
  });
});
```

<br>
Analyzing the code, we can see 3 specs in this test suite:

- `should create the app`
- `should have as title 'angular-testing'`
- `should render title`
  <br>
  Let's run `ng test` in the terminal and confirm that all 3 specs are passing!<p>.

### Introduction to Jasmine and Karma

As introduced before, Angular uses [Jasmine](https://jasmine.github.io/) for unit testing, which successively runs Karma, a test runner that starts a server in a new browser window to show the test results.<p>
PS: Karma's running in hot reload mode, meaning that it automatically re-runs the tests everytime we change the code (although sometimes we have to manually refresh the browser).<p>

Keep in mind that without the _.spec._ extension, _app.component.spec.ts_ wouldn't be run for testing.
<br>

### List of useful commands:

- `ng new project-name` - creates a new Angular project;

- `ng test` - runs the unit tests;
- `ng test --watch=false` - runs the unit tests once and exits;
- `ng test --browsers=ChromeHeadless` - runs the unit tests in headless mode (without opening a browser window);

- `ng g c component-name` - generates a component;
- `ng g s service-name` - generates a service;
- `ng g c component-name --skipTests=true` - generates a component without generating a spec file;
- `ng g s service-name --skipTests=true` - generates a service without generating a spec file;

- `ng serve` - runs the app in development mode;
- `ng build` - builds the app for production;
- `ng build --prod` - builds the app for production with minification;
  <br>

### Unit Testing

Services are the best option to start learning unit testing.<p>
So, we shall create a multiply function in a service and test it.<p>
<br>
Let's do it with the help of GitHub Co-Pilot.
<br>

### GitHub Copilot to the rescue!

Copilot suggested me all the commands to create a service and its spec file, so i just had to run `ng g c multiply` in the terminal.and two files were generated in `src/app` folder.<p>

This files were:

**co** multiply.service.spec.ts
**co** multiply.service.ts

`multiply.service.spec.ts` file's content generated by Angular CLI, looked like this:

```typescript
import { TestBed } from "@angular/core/testing";
import { MultiplyService } from "./multiply.service";

describe("MultiplyService", () => {
  let service: MultiplyService;

  beforeEach(() => {
    TestBed.configureTestingModule({});
    service = TestBed.inject(MultiplyService);
  });

  it("should be created", () => {
    expect(service).toBeTruthy();
  });
});
```

<br>
Although, we're going to **delete** its content.<p>
I first left the imports as they shall be necessary) and write our own tests with the help of Copilot.
<br>
I then opened `multiply.service.ts`, wrote the following comment and Copilot generated the rest:

```typescript
// create function to be tested, named multiply
  multiply(a, b) {
    return a * b;
  }
```

<br>

Now, because Angular runs in TypeScript (as you probably notice by all the **.ts** extensions) it sure is good practice to specify types in the function itself.<p>
Copilot might not know this in advance but it surely learns from us,<p>
so i re-wrote the comment as `create type function multiply` and, Copilot generated:

```typescript
  // create type function multiply
  multiply(a: number, b: number): number {
    return a * b;
  }
```

<br>
I just had to accept the new lines with `tab` and get to the new line by pressing `enter`.<p>
<br>
Next, I opened the empty `testing.service.spec.ts` file, wrote the following comment and Copilot generated this:

```typescript
// create test for testing.service.ts
describe('multiplyService', () => {
```

now, at first CoPilot didnd't suggested anything more, i thought it might be "finding" solutions, so i hit `ctrl + enter` to open the suggestions panel and, indeed, it suggested me the following:

```typescript
// Suggestion 1

() => {
  // create variable service
  let service: MultiplyService;

  // create beforeEach
  beforeEach(() => {
    // create TestBed
    TestBed.configureTestingModule({});
    // inject service
    service = TestBed.inject(MultiplyService);
  });

  // create test case for service
  it("should be created", () => {
    // expect service to be truthy
    expect(service).toBeTruthy();
  });

  // create test case for multiply
  it("should multiply 5 and 4 and return 20", () => {
    // create variable a and b
    const a = 5;
    const b = 4;
    // create variable result
    const result = 20;
    // expect service multiply to equal result
    expect(service.multiply(a, b)).toEqual(result);
  });
};
```

i clicked `Accept Solution` and the code was generated/copied to the working file.

now, i just had to run `ng test` and the test passed.
